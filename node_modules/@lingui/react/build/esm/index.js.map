{"version":3,"file":"index.js","sources":["../../src/I18nProvider.tsx","../../src/format.ts","../../src/Trans.tsx"],"sourcesContent":["import React, { ComponentType, FunctionComponent } from \"react\"\nimport { I18n } from \"@lingui/core\"\nimport { TransRenderProps } from \"./Trans\"\n\nexport type I18nContext = {\n  i18n: I18n\n  defaultComponent?: ComponentType<TransRenderProps>\n}\n\nexport type withI18nProps = {\n  i18n: I18n\n}\n\nexport type I18nProviderProps = I18nContext & {\n  forceRenderOnLocaleChange?: boolean\n  children?: React.ReactNode\n}\n\nconst LinguiContext = React.createContext<I18nContext>(null)\n\nexport function useLingui(): I18nContext {\n  const context = React.useContext<I18nContext>(LinguiContext)\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (context == null) {\n      throw new Error(\"useLingui hook was used without I18nProvider.\")\n    }\n  }\n\n  return context\n}\n\nexport function withI18n(\n  o?: object\n): <P extends withI18nProps>(\n  Component: ComponentType<P>\n) => React.ComponentType<Omit<P, \"i18n\">> {\n  return <P extends withI18nProps>(\n    WrappedComponent: ComponentType<P>\n  ): ComponentType<P> => {\n    return (props) => {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (typeof o === \"function\" || React.isValidElement(o)) {\n          throw new Error(\n            \"withI18n([options]) takes options as a first argument, \" +\n              \"but received React component itself. Without options, the Component \" +\n              \"should be wrapped as withI18n()(Component), not withI18n(Component).\"\n          )\n        }\n      }\n\n      const { i18n } = useLingui()\n      return <WrappedComponent {...props} i18n={i18n} />\n    }\n  }\n}\n\nexport const I18nProvider: FunctionComponent<I18nProviderProps> = ({\n  i18n,\n  defaultComponent,\n  forceRenderOnLocaleChange = true,\n  children,\n}) => {\n  /**\n   * We can't pass `i18n` object directly through context, because even when locale\n   * or messages are changed, i18n object is still the same. Context provider compares\n   * reference identity and suggested workaround is create a wrapper object every time\n   * we need to trigger re-render. See https://reactjs.org/docs/context.html#caveats.\n   *\n   * Due to this effect we also pass `defaultComponent` in the same context, instead\n   * of creating a separate Provider/Consumer pair.\n   *\n   * We can't use useMemo hook either, because we want to recalculate value manually.\n   */\n  const makeContext = () => ({\n    i18n,\n    defaultComponent,\n  })\n  const getRenderKey = () => {\n    return (\n      forceRenderOnLocaleChange ? i18n.locale || \"default\" : \"default\"\n    ) as string\n  }\n\n  const [context, setContext] = React.useState<I18nContext>(makeContext()),\n    [renderKey, setRenderKey] = React.useState<string>(getRenderKey())\n\n  /**\n   * Subscribe for locale/message changes\n   *\n   * I18n object from `@lingui/core` is the single source of truth for all i18n related\n   * data (active locale, catalogs). When new messages are loaded or locale is changed\n   * we need to trigger re-rendering of LinguiContext.Consumers.\n   *\n   * We call `setContext(makeContext())` after adding the observer in case the `change`\n   * event would already have fired between the inital renderKey calculation and the\n   * `useEffect` hook being called. This can happen if locales are loaded/activated\n   * async.\n   */\n  React.useEffect(() => {\n    const unsubscribe = i18n.on(\"change\", () => {\n      setContext(makeContext())\n      setRenderKey(getRenderKey())\n    })\n    if (renderKey === \"default\") {\n      setRenderKey(getRenderKey())\n    }\n    if (forceRenderOnLocaleChange && renderKey === \"default\") {\n      console.log(\n        \"I18nProvider did not render. A call to i18n.activate still needs to happen or forceRenderOnLocaleChange must be set to false.\"\n      )\n    }\n    return () => unsubscribe()\n  }, [])\n\n  if (forceRenderOnLocaleChange && renderKey === \"default\") return null\n\n  return (\n    <LinguiContext.Provider value={context} key={renderKey}>\n      {children}\n    </LinguiContext.Provider>\n  )\n}\n","import React from \"react\"\n\n// match <tag>paired</tag> and <tag/> unpaired tags\nconst tagRe = /<([a-zA-Z0-9]+)>(.*?)<\\/\\1>|<([a-zA-Z0-9]+)\\/>/\nconst nlRe = /(?:\\r\\n|\\r|\\n)/g\n\n// For HTML, certain tags should omit their close tag. We keep a whitelist for\n// those special-case tags.\nconst voidElementTags = {\n  area: true,\n  base: true,\n  br: true,\n  col: true,\n  embed: true,\n  hr: true,\n  img: true,\n  input: true,\n  keygen: true,\n  link: true,\n  meta: true,\n  param: true,\n  source: true,\n  track: true,\n  wbr: true,\n  menuitem: true,\n}\n\n/**\n * `formatElements` - parse string and return tree of react elements\n *\n * `value` is string to be formatted with <tag>Paired<tag/> or <tag/> (unpaired)\n * placeholders. `elements` is a array of react elements which indexes\n * correspond to element indexes in formatted string\n */\nfunction formatElements(\n  value: string,\n  elements: { [key: string]: React.ReactElement<any> } = {}\n): string | Array<any> {\n  const uniqueId = makeCounter(0, \"$lingui$\")\n  const parts = value.replace(nlRe, \"\").split(tagRe)\n\n  // no inline elements, return\n  if (parts.length === 1) return value\n\n  const tree = []\n\n  const before = parts.shift()\n  if (before) tree.push(before)\n\n  for (const [index, children, after] of getElements(parts)) {\n    let element = elements[index]\n\n    if (!element || (voidElementTags[element.type as string] && children)) {\n      if (!element) {\n        console.error(\n          `Can use element at index '${index}' as it is not declared in the original translation`\n        )\n      } else {\n        console.error(\n          `${element.type} is a void element tag therefore it must have no children`\n        )\n      }\n\n      // ignore problematic element but push its children and elements after it\n      element = React.createElement(React.Fragment)\n    }\n\n    tree.push(\n      React.cloneElement(\n        element,\n        { key: uniqueId() },\n\n        // format children for pair tags\n        // unpaired tags might have children if it's a component passed as a variable\n        children ? formatElements(children, elements) : element.props.children\n      )\n    )\n\n    if (after) tree.push(after)\n  }\n\n  return tree\n}\n\n/*\n * `getElements` - return array of element indexes and element childrens\n *\n * `parts` is array of [pairedIndex, children, unpairedIndex, textAfter, ...]\n * where:\n * - `pairedIndex` is index of paired element (undef for unpaired)\n * - `children` are children of paired element (undef for unpaired)\n * - `unpairedIndex` is index of unpaired element (undef for paired)\n * - `textAfter` is string after all elements (empty string, if there's nothing)\n *\n * `parts` length is always multiply of 4\n *\n * Returns: Array<[elementIndex, children, after]>\n */\nfunction getElements(parts) {\n  if (!parts.length) return []\n\n  const [paired, children, unpaired, after] = parts.slice(0, 4)\n\n  return [[paired || unpaired, children || \"\", after]].concat(\n    getElements(parts.slice(4, parts.length))\n  )\n}\n\nconst makeCounter =\n  (count = 0, prefix = \"\") =>\n  () =>\n    `${prefix}_${count++}`\n\nexport { formatElements }\n","import React from \"react\"\n\nimport { useLingui } from \"./I18nProvider\"\nimport { formatElements } from \"./format\"\n\nexport type TransRenderProps = {\n  id?: string\n  translation?: React.ReactNode\n  children?: React.ReactNode\n  message?: string | null\n  isTranslated?: boolean\n}\n\nexport type TransProps = {\n  id: string\n  message?: string\n  values: Record<string, unknown>\n  context?: string\n  components: { [key: string]: React.ElementType | any }\n  formats?: Record<string, unknown>\n  children?: React.ReactNode\n  component?: React.ComponentType<TransRenderProps>\n  render?: (props: TransRenderProps) => React.ReactElement<any, any> | null\n}\n\nexport function Trans(props: TransProps): React.ReactElement<any, any> | null {\n  const { i18n, defaultComponent } = useLingui()\n  const { render, component, id, message, formats } = props\n\n  const values = { ...props.values }\n  const components = { ...props.components }\n\n  if (values) {\n    /*\n      Related discussion: https://github.com/lingui/js-lingui/issues/183\n\n      Values *might* contain React elements with static content.\n      They're replaced with <INDEX /> placeholders and added to `components`.\n\n      Example:\n      Translation: Hello {name}\n      Values: { name: <strong>Jane</strong> }\n\n      It'll become \"Hello <0 />\" with components=[<strong>Jane</strong>]\n      */\n\n    Object.keys(values).forEach((key) => {\n      const value = values[key]\n      if (!React.isValidElement(value)) return\n\n      const index = Object.keys(components).length\n\n      components[index] = value\n      values[key] = `<${index}/>`\n    })\n  }\n\n  const _translation: string =\n    i18n && typeof i18n._ === \"function\"\n      ? i18n._(id, values, { message, formats })\n      : id // i18n provider isn't loaded at all\n\n  const translation = _translation\n    ? formatElements(_translation, components)\n    : null\n\n  if (render === null || component === null) {\n    // Although `string` is a valid react element, types only allow `Element`\n    // Upstream issue: https://github.com/DefinitelyTyped/DefinitelyTyped/issues/20544\n    return translation as unknown as React.ReactElement<any, any>\n  }\n\n  const FallbackComponent = (defaultComponent ||\n    React.Fragment) as React.ComponentType<any>\n\n  const i18nProps = {\n    id,\n    message,\n    translation,\n    isTranslated: id !== translation && message !== translation,\n  }\n\n  // Validation of `render` and `component` props\n  if (render && component) {\n    console.error(\n      \"You can't use both `component` and `render` prop at the same time. `component` is ignored.\"\n    )\n  } else if (render && typeof render !== \"function\") {\n    console.error(\n      `Invalid value supplied to prop \\`render\\`. It must be a function, provided ${render}`\n    )\n  } else if (component && typeof component !== \"function\") {\n    // Apparently, both function components and class components are functions\n    // See https://stackoverflow.com/a/41658173/1535540\n    console.error(\n      `Invalid value supplied to prop \\`component\\`. It must be a React component, provided ${component}`\n    )\n    return <FallbackComponent {...i18nProps}>{translation}</FallbackComponent>\n  }\n\n  // Rendering using a render prop\n  if (typeof render === \"function\") {\n    // Component: render={(props) => <a title={props.translation}>x</a>}\n    return render(i18nProps)\n  }\n\n  // `component` prop has a higher precedence over `defaultComponent`\n  const Component = (component || FallbackComponent) as React.ComponentType<any>\n  const DefaultComponent = defaultComponent\n\n  return DefaultComponent && !component ? (\n    <DefaultComponent {...i18nProps}>{translation}</DefaultComponent>\n  ) : (\n    <Component>{translation}</Component>\n  )\n}\n\nTrans.defaultProps = {\n  values: {},\n  components: {},\n}\n"],"names":["LinguiContext","React","createContext","useLingui","context","useContext","process","env","NODE_ENV","Error","withI18n","o","WrappedComponent","props","isValidElement","i18n","I18nProvider","defaultComponent","forceRenderOnLocaleChange","children","makeContext","getRenderKey","locale","setContext","useState","renderKey","setRenderKey","useEffect","unsubscribe","on","console","log","tagRe","nlRe","voidElementTags","area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","menuitem","formatElements","value","elements","uniqueId","makeCounter","parts","replace","split","length","tree","before","shift","push","index","after","getElements","element","type","error","createElement","Fragment","cloneElement","key","paired","unpaired","slice","concat","count","prefix","Trans","render","component","id","message","formats","values","components","Object","keys","forEach","_translation","_","translation","FallbackComponent","i18nProps","isTranslated","Component","DefaultComponent","defaultProps"],"mappings":"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"}